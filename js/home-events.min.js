function getFullUrl(e){return e.startsWith("http")||e.startsWith("//")?e:new URL(e,window.location.origin).href}function onKnowTheStory(e,t){let a=getFullUrl(t);window.dataLayer.push({event:"click_element",CDAction:"conoce_mi_historia",CDLabel:e,CDValue:a,detail:"",CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onKnowTheStory):",{fullVideoUrl:a})}function onGallery(e){let t=getFullUrl(e);window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"ver_foto",CDFunnel:"PE Etapa Final 2024",CDValue:t}),console.log("Evento registrado (onGallery):",{fullImageUrl:t})}function onHomeShare(e){window.dataLayer.push({event:"click_element",CDCategory:"compartir_pagina",CDLabel:e,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onHomeShare):",{socialNetwork:e})}function onVideoStart(e,t){let a=getFullUrl(t);window.dataLayer.push({event:"pec_2024_videos",CDCategory:e,CDAction:"01. Inicio",CDLabel:"",CDValue:a,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onVideoStart):",{fullVideoUrl:a})}function onVideoPause(e,t,a){let o=getFullUrl(a);window.dataLayer.push({event:"pec_2024_videos",CDCategory:e,CDAction:`02. Progreso ${t}%`,CDLabel:"",CDValue:o,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onVideoPause):",{fullVideoUrl:o})}function onVideoCompletion(e,t){let a=getFullUrl(t);window.dataLayer.push({event:"pec_2024_videos",CDCategory:e,CDAction:"03. Completado",CDLabel:"",CDValue:a,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onVideoCompletion):",{fullVideoUrl:a})}function onGalleryDownload(e){let t=getFullUrl(e);window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"descargar_foto",CDFunnel:"PE Etapa Final 2024",CDValue:t}),console.log("Evento registrado (onGalleryDownload):",{fullImageUrl:t})}function onGalleryShare(e){let t=getFullUrl(e);window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"compartir_foto",CDLabel:"",CDFunnel:"PE Etapa Final 2024",CDValue:t}),console.log("Evento registrado (onGalleryShare):",{fullImageUrl:t})}function onDropdownShare(e,t){let a=getFullUrl(t||window.location.href);window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"compartir_foto",CDLabel:e,CDFunnel:"PE Etapa Final 2024",CDValue:a}),console.log(`Evento registrado (onDropdownShare - ${e}):`,{fullImageUrl:a})}function shareInFacebook(){onDropdownShare("facebook"),window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,"_blank")}function shareInWhatsapp(){onDropdownShare("whatsapp"),window.open(`https://wa.me/?text=${encodeURIComponent(window.location.href)}`,"_blank")}function registrarEventoGanadoresPECCategoriasEspeciales(e,t,a,o){let n=a?new URL(a,window.location.origin).href:null,r=o?new URL(o,window.location.origin).href:null;window.dataLayer.push({event:"ganadores_pec2024_categorias_especiales",CDCategory:t,CDAction:"conoce_mi_historia",CDLabel:`participante_${e}`,CDValue:r,detail:n,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado:",{fullImageUrl:n,fullVideoUrl:r})}function registrarEventoGanadoresPEC2024(e,t,a,o){let n=a?new URL(a,window.location.origin).href:null,r=o?new URL(o,window.location.origin).href:null;window.dataLayer.push({event:"ganadores_pec2024",CDCategory:t,CDAction:"conoce_mi_historia",CDLabel:`participante_${e}`,CDValue:r,detail:n,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado:",{fullImageUrl:n,fullVideoUrl:r})}function handleStoryClick(e,t,a,o,n,r,l,i){let c=l?new URL(l,window.location.origin).href:null,s=i?new URL(i,window.location.origin).href:null;e.stopImmediatePropagation(),openModal(t,a,o,n,r),window.dataLayer.push({event:"ganadores_pec2024",CDCategory:r,CDAction:"conoce_mi_historia",CDLabel:`participante_${parseInt(n)+1}`,CDValue:s,detail:c,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento espec\xedfico registrado en dataLayer:",{fullImageUrl:c,fullVideoUrl:s})}function share(e){let t={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,whatsapp:`https://wa.me/?text=${encodeURIComponent(window.location.href)}`};t[e]?window.open(t[e],"_blank"):console.error("Plataforma no v\xe1lida:",e)}function handleStoryClick(e,t,a,o,n,r,l){openModal(e,t,a,o,n),registrarEventoGanadoresPEC2024(o,n,r,l)}window.dataLayer=window.dataLayer||[],window.dataLayer=window.dataLayer||[],document.addEventListener("click",function(e){if(!e.target.closest(".competitor_container-footer")&&!e.target.closest(".story-container")){let t={event:"click_element",CDCategory:"general_click",CDLabel:e.target.tagName,CDFunnel:"PE Etapa Final 2024"};console.log("General click event:",t),window.dataLayer.push(t)}}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("share-facebook");e&&e.addEventListener("click",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click_element",CDCategory:"compartir_pagina",CDLabel:"facebook",CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado: Facebook"),window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,"_blank")});let t=document.getElementById("share-whatsapp");t&&t.addEventListener("click",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click_element",CDCategory:"compartir_pagina",CDLabel:"whatsapp",CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado: WhatsApp"),window.open(`https://wa.me/?text=${encodeURIComponent(window.location.href)}`,"_blank")})}),function(){let e="";function t(e){let t=new URL(e,window.location.origin).href;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"compartir_foto",CDValue:t,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento de compartir registrado:",{fullImageUrl:t})}window.addEventListener("click",function(e){let t=document.getElementById("share-dropdown"),a=document.querySelector(".share_container");t&&a&&!a.contains(e.target)&&(t.style.display="none")}),window.openModalGallery=function t(a){let o=document.getElementById("gallery-image");o.src=a.src;let n=new URL(a.getAttribute("src"),window.location.origin);e=n.href,document.getElementById("gallery-view-modal").style.display="block"},window.closeModalGallery=function e(){document.getElementById("gallery-view-modal").style.display="none"},window.toggleDropdown=function e(){let t=document.getElementById("share-dropdown");t.style.display="none"===t.style.display||""===t.style.display?"block":"none"},window.shareInFacebook=function a(){let o=encodeURIComponent(e||window.location.href),n=`https://www.facebook.com/sharer/sharer.php?u=${o}`;t(e||window.location.href),window.open(n,"_blank")},window.shareInWhatsapp=function a(){let o=encodeURIComponent(e||window.location.href),n=`https://wa.me/?text=${o}`;t(e||window.location.href),window.open(n,"_blank")},window.registrarEventoCompartirFoto=t,window.registrarEventoVerFoto=function e(t){let a=new URL(t,window.location.origin).href;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"ver_foto",CDFunnel:"PE Etapa Final 2024",CDValue:a}),console.log("Evento de ver foto registrado:",{fullImageUrl:a})},window.registrarEventoDescargarFoto=function e(t){console.log("URL recibida (antes de procesar):",t);let a=t.startsWith("http")||t.startsWith("//")?t:new URL(t,window.location.origin).href;console.log("URL procesada (completa):",a),window.dataLayer=[],window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"descargar_foto",CDFunnel:"PE Etapa Final 2024",CDValue:a}),console.log("Evento de descargar foto registrado en dataLayer:",{fullImageUrl:a})}}(),window.onload=function(){window.share=function e(t){let a=encodeURIComponent(window.location.href),o="";"facebook"===t?o=`https://www.facebook.com/sharer/sharer.php?u=${a}`:"whatsapp"===t&&(o=`https://wa.me/?text=${a}`),window.open(o,"_blank")}},document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector("#ganadores"),t=e.querySelector(".votes_container"),a=t.querySelectorAll(".competitor_container"),o=0,n=0;if(window.innerWidth<=768){let r=document.createElement("div");r.className="custom-section-move";let l=document.createElement("div");l.className="dots_container",a.forEach((e,t)=>{let a=document.createElement("span");a.className="dot",0===t&&a.classList.add("active"),l.appendChild(a)});let i=document.createElement("div");i.id="ganadores-prev-button",i.className="nav-arrow left-arrow inactive",i.textContent="←";let c=document.createElement("div");c.id="ganadores-next-button",c.className="nav-arrow right-arrow",c.textContent="→";let s=document.createElement("div");s.className="buttons-container",s.appendChild(i),s.appendChild(c),r.appendChild(l),r.appendChild(s),t.parentNode.appendChild(r),t.addEventListener("scroll",function e(){let o=t.scrollLeft,n=t.offsetWidth,r=Math.round(o/n),s=l.querySelectorAll(".dot");s.forEach((e,t)=>{e.classList.toggle("active",t===r)}),i.classList.toggle("inactive",0===r),c.classList.toggle("inactive",r===a.length-1),i.style.backgroundColor=r>0?"#652d86":"#D8DADA",i.style.color=r>0?"white":"#9D9D9D",c.style.backgroundColor=r<a.length-1?"#652d86":"#D8DADA",c.style.color=r<a.length-1?"white":"#9D9D9D"}),l.querySelectorAll(".dot").forEach((e,a)=>{e.addEventListener("click",function(e){e.stopPropagation(),t.scrollTo({left:a*t.offsetWidth,behavior:"smooth"})})}),i.addEventListener("click",function(e){e.stopPropagation();let a=Math.round(t.scrollLeft/t.offsetWidth);a>0&&t.scrollTo({left:(a-1)*t.offsetWidth,behavior:"smooth"})}),c.addEventListener("click",function(e){e.stopPropagation();let o=Math.round(t.scrollLeft/t.offsetWidth);o<a.length-1&&t.scrollTo({left:(o+1)*t.offsetWidth,behavior:"smooth"})}),t.addEventListener("touchstart",function(e){o=e.touches[0].clientX,e.stopPropagation()}),t.addEventListener("touchend",function(e){n=e.changedTouches[0].clientX,e.stopPropagation(),function e(){let r=Math.round(t.scrollLeft/t.offsetWidth);o-n>50&&r<a.length-1?t.scrollTo({left:(r+1)*t.offsetWidth,behavior:"smooth"}):n-o>50&&r>0&&t.scrollTo({left:(r-1)*t.offsetWidth,behavior:"smooth"})}()})}});