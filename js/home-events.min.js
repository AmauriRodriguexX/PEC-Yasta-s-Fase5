function getFullUrl(e){return e.startsWith("http")||e.startsWith("//")?e:new URL(e,window.location.origin).href}function onKnowTheStory(e,a){let t=getFullUrl(a);window.dataLayer.push({event:"click_element",CDAction:"conoce_mi_historia",CDLabel:e,CDValue:t,detail:"",CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onKnowTheStory):",{fullVideoUrl:t})}function onGallery(e){let a=getFullUrl(e);window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"ver_foto",CDFunnel:"PE Etapa Final 2024",CDValue:a}),console.log("Evento registrado (onGallery):",{fullImageUrl:a})}function onHomeShare(e){window.dataLayer.push({event:"click_element",CDCategory:"compartir_pagina",CDLabel:e,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onHomeShare):",{socialNetwork:e})}function onVideoStart(e,a){let t=getFullUrl(a);window.dataLayer.push({event:"pec_2024_videos",CDCategory:e,CDAction:"01. Inicio",CDLabel:"",CDValue:t,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onVideoStart):",{fullVideoUrl:t})}function onVideoPause(e,a,t){let o=getFullUrl(t);window.dataLayer.push({event:"pec_2024_videos",CDCategory:e,CDAction:`02. Progreso ${a}%`,CDLabel:"",CDValue:o,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onVideoPause):",{fullVideoUrl:o})}function onVideoCompletion(e,a){let t=getFullUrl(a);window.dataLayer.push({event:"pec_2024_videos",CDCategory:e,CDAction:"03. Completado",CDLabel:"",CDValue:t,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado (onVideoCompletion):",{fullVideoUrl:t})}function onGalleryDownload(e){let a=getFullUrl(e);window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"descargar_foto",CDFunnel:"PE Etapa Final 2024",CDValue:a}),console.log("Evento registrado (onGalleryDownload):",{fullImageUrl:a})}function onGalleryShare(e){let a=getFullUrl(e);window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"compartir_foto",CDLabel:"",CDFunnel:"PE Etapa Final 2024",CDValue:a}),console.log("Evento registrado (onGalleryShare):",{fullImageUrl:a})}function onDropdownShare(e,a){let t=getFullUrl(a||window.location.href);window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"compartir_foto",CDLabel:e,CDFunnel:"PE Etapa Final 2024",CDValue:t}),console.log(`Evento registrado (onDropdownShare - ${e}):`,{fullImageUrl:t})}function shareInFacebook(){onDropdownShare("facebook"),window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,"_blank")}function shareInWhatsapp(){onDropdownShare("whatsapp"),window.open(`https://wa.me/?text=${encodeURIComponent(window.location.href)}`,"_blank")}function registrarEventoGanadoresPECCategoriasEspeciales(e,a,t,o){let n=t?new URL(t,window.location.origin).href:null,l=o?new URL(o,window.location.origin).href:null;window.dataLayer.push({event:"ganadores_pec2024_categorias_especiales",CDCategory:a,CDAction:"conoce_mi_historia",CDLabel:`participante_${e}`,CDValue:l,detail:n,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado:",{fullImageUrl:n,fullVideoUrl:l})}function registrarEventoGanadoresPEC2024(e,a,t,o){let n=t?new URL(t,window.location.origin).href:null,l=o?new URL(o,window.location.origin).href:null;window.dataLayer.push({event:"ganadores_pec2024",CDCategory:a,CDAction:"conoce_mi_historia",CDLabel:`participante_${e}`,CDValue:l,detail:n,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado:",{fullImageUrl:n,fullVideoUrl:l})}function handleStoryClick(e,a,t,o,n,l,r,i){let c=r?new URL(r,window.location.origin).href:null,s=i?new URL(i,window.location.origin).href:null;e.stopImmediatePropagation(),openModal(a,t,o,n,l),window.dataLayer.push({event:"ganadores_pec2024",CDCategory:l,CDAction:"conoce_mi_historia",CDLabel:`participante_${parseInt(n)+1}`,CDValue:s,detail:c,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento espec\xedfico registrado en dataLayer:",{fullImageUrl:c,fullVideoUrl:s})}function share(e){let a={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,whatsapp:`https://wa.me/?text=${encodeURIComponent(window.location.href)}`};a[e]?window.open(a[e],"_blank"):console.error("Plataforma no v\xe1lida:",e)}function handleStoryClick(e,a,t,o,n,l,r){openModal(e,a,t,o,n),registrarEventoGanadoresPEC2024(o,n,l,r)}window.dataLayer=window.dataLayer||[],window.dataLayer=window.dataLayer||[],document.addEventListener("click",function(e){if(!e.target.closest(".competitor_container-footer")&&!e.target.closest(".story-container")){let a={event:"click_element",CDCategory:"general_click",CDLabel:e.target.tagName,CDFunnel:"PE Etapa Final 2024"};console.log("General click event:",a),window.dataLayer.push(a)}}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("share-facebook");e&&e.addEventListener("click",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click_element",CDCategory:"compartir_pagina",CDLabel:"facebook",CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado: Facebook"),window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,"_blank")});let a=document.getElementById("share-whatsapp");a&&a.addEventListener("click",function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"click_element",CDCategory:"compartir_pagina",CDLabel:"whatsapp",CDFunnel:"PE Etapa Final 2024"}),console.log("Evento registrado: WhatsApp"),window.open(`https://wa.me/?text=${encodeURIComponent(window.location.href)}`,"_blank")})}),function(){let e="";function a(e){let a=new URL(e,window.location.origin).href;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"compartir_foto",CDValue:a,CDFunnel:"PE Etapa Final 2024"}),console.log("Evento de compartir registrado:",{fullImageUrl:a})}window.addEventListener("click",function(e){let a=document.getElementById("share-dropdown"),t=document.querySelector(".share_container");a&&t&&!t.contains(e.target)&&(a.style.display="none")}),window.openModalGallery=function a(t){document.getElementById("gallery-image").src=t.src;e=new URL(t.getAttribute("src"),window.location.origin).href,document.getElementById("gallery-view-modal").style.display="block"},window.closeModalGallery=function e(){document.getElementById("gallery-view-modal").style.display="none"},window.toggleDropdown=function e(){let a=document.getElementById("share-dropdown");a.style.display="none"===a.style.display||""===a.style.display?"block":"none"},window.shareInFacebook=function t(){let o=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e||window.location.href)}`;a(e||window.location.href),window.open(o,"_blank")},window.shareInWhatsapp=function t(){let o=`https://wa.me/?text=${encodeURIComponent(e||window.location.href)}`;a(e||window.location.href),window.open(o,"_blank")},window.registrarEventoCompartirFoto=a,window.registrarEventoVerFoto=function e(a){let t=new URL(a,window.location.origin).href;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"ver_foto",CDFunnel:"PE Etapa Final 2024",CDValue:t}),console.log("Evento de ver foto registrado:",{fullImageUrl:t})},window.registrarEventoDescargarFoto=function e(a){console.log("URL recibida (antes de procesar):",a);let t=a.startsWith("http")||a.startsWith("//")?a:new URL(a,window.location.origin).href;console.log("URL procesada (completa):",t),window.dataLayer=[],window.dataLayer.push({event:"galeria_PEC",CDCategory:"Galer\xeda etapa final PEC",CDAction:"descargar_foto",CDFunnel:"PE Etapa Final 2024",CDValue:t}),console.log("Evento de descargar foto registrado en dataLayer:",{fullImageUrl:t})}}(),window.onload=function(){window.share=function e(a){let t=encodeURIComponent(window.location.href),o="";"facebook"===a?o=`https://www.facebook.com/sharer/sharer.php?u=${t}`:"whatsapp"===a&&(o=`https://wa.me/?text=${t}`),window.open(o,"_blank")}},document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector("#ganadores").querySelector(".votes_container"),a=e.querySelectorAll(".competitor_container"),t=0,o=0;if(window.innerWidth<=768){let n=document.createElement("div");n.className="custom-section-move";let l=document.createElement("div");l.className="dots_container",a.forEach((e,a)=>{let t=document.createElement("span");t.className="dot",0===a&&t.classList.add("active"),l.appendChild(t)});let r=document.createElement("div");r.id="ganadores-prev-button",r.className="nav-arrow left-arrow inactive",r.textContent="←";let i=document.createElement("div");i.id="ganadores-next-button",i.className="nav-arrow right-arrow",i.textContent="→";let c=document.createElement("div");c.className="buttons-container",c.appendChild(r),c.appendChild(i),n.appendChild(l),n.appendChild(c),e.parentNode.appendChild(n),e.addEventListener("scroll",function t(){let o,n=Math.round(e.scrollLeft/e.offsetWidth);l.querySelectorAll(".dot").forEach((e,a)=>{e.classList.toggle("active",a===n)}),r.classList.toggle("inactive",0===n),i.classList.toggle("inactive",n===a.length-1),r.style.backgroundColor=n>0?"#652d86":"#D8DADA",r.style.color=n>0?"white":"#9D9D9D",i.style.backgroundColor=n<a.length-1?"#652d86":"#D8DADA",i.style.color=n<a.length-1?"white":"#9D9D9D"}),l.querySelectorAll(".dot").forEach((a,t)=>{a.addEventListener("click",function(a){a.stopPropagation(),e.scrollTo({left:t*e.offsetWidth,behavior:"smooth"})})}),r.addEventListener("click",function(a){a.stopPropagation();let t=Math.round(e.scrollLeft/e.offsetWidth);t>0&&e.scrollTo({left:(t-1)*e.offsetWidth,behavior:"smooth"})}),i.addEventListener("click",function(t){t.stopPropagation();let o=Math.round(e.scrollLeft/e.offsetWidth);o<a.length-1&&e.scrollTo({left:(o+1)*e.offsetWidth,behavior:"smooth"})}),e.addEventListener("touchstart",function(e){t=e.touches[0].clientX,e.stopPropagation()}),e.addEventListener("touchend",function(n){let l;o=n.changedTouches[0].clientX,n.stopPropagation(),l=Math.round(e.scrollLeft/e.offsetWidth),t-o>50&&l<a.length-1?e.scrollTo({left:(l+1)*e.offsetWidth,behavior:"smooth"}):o-t>50&&l>0&&e.scrollTo({left:(l-1)*e.offsetWidth,behavior:"smooth"})})}});